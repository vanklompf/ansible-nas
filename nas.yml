---
- name: Ansible-NAS
  hosts: all

  pre_tasks:
    - name: Verify Ansible meets ansible-nas version requirements.
      assert:
        that: "ansible_version.full is version_compare('2.10', '>=')"
        msg: "update Ansible to at least 2.10 to install ansible-nas"

  roles:
    ###
    ### Requirements
    ###
    - role: ansible-nas-users
      tags:
        - ansible-nas-users
        - ansible-nas

    - role: bertvv.samba
      tags:
        - samba
        - skip_ansible_lint

    - role: geerlingguy.nfs
      tags:
        - nfs
        - skip_ansible_lint

    - role: geerlingguy.docker
      when: ansible_architecture == "x86_64"
      tags:
        - docker
        - skip_ansible_lint

    - role: geerlingguy.docker_arm
      when: ansible_architecture == "aarch64"
      tags:
        - docker_arm
        - skip_ansible_lint

    ###
    ### Ansible-NAS Roles
    ###
    - role: ansible-nas-general
      tags:
        - ansible-nas-general
        - ansible-nas

    - role: ansible-nas-docker
      tags:
        - ansible-nas-docker
        - ansible-nas

    ###
    ### Applications
    ###
    - role: admidio
      tags:
        - admidio

    - role: airsonic
      tags:
        - airsonic

    - role: authelia
      tags:
        - authelia

    - role: authentik
      tags:
        - authentik

    - role: barcodebuddy
      tags:
        - barcodebuddy

    - role: bazarr
      tags:
        - bazarr

    - role: beets
      tags:
        - beets

    - role: blaze
      tags:
        - blaze

    - role: booksonic
      tags:
        - booksonic

    - role: calibre
      tags:
        - calibre

    - role: changedetection
      tags:
        - changedetection

    - role: chatpad
      tags:
        - chatpad

    - role: claper
      tags:
        - claper

    - role: cloudcmd
      tags:
        - cloudcmd

    - role: cloudflare_ddns
      tags:
        - cloudflare_ddns

    - role: code-server
      tags:
        - code-server

    - role: couchpotato
      tags:
        - couchpotato

    - role: dashy
      tags:
        - dashy

    - role: ddns_updater
      tags:
        - ddns_updater

    - role: deluge
      tags:
        - deluge

    - role: dokuwiki
      tags:
        - dokuwiki

    - role: drone-ci
      tags:
        - drone_ci

    - role: duplicacy
      tags:
        - duplicacy

    - role: duplicati
      tags:
        - duplicati

    - role: dufs
      tags:
        - dufs

    - role: emby
      tags:
        - emby

    - role: esphome
      tags:
        - esphome

    - role: excalidraw
      tags:
        - excalidraw

    - role: firefly
      tags:
        - firefly

    - role: flame
      tags:
        - flame

    - role: flarum
      tags:
        - flarum

    - role: flatnotes
      tags:
        - flatnotes

    - role: freshrss
      tags:
        - freshrss

    - role: frigate
      tags:
        - frigate

    - role: gaps
      tags:
        - gaps

    - role: get_iplayer
      tags:
        - get_iplayer

    - role: ghost
      tags:
        - ghost

    - role: gitea
      tags:
        - gitea

    - role: gitlab
      tags:
        - gitlab

    - role: glances
      tags:
        - glances

    - role: gotify
      tags:
        - gotify

    - role: graylog
      tags:
        - graylog

    - role: grocy
      tags:
        - grocy

    - role: guacamole
      tags:
        - guacamole

    - role: healthchecks.io
      tags:
        - healthchecks.io

    - role: heimdall
      tags:
        - heimdall

    - role: hello_world
      tags:
        - hello_world

    - role: homeassistant
      tags:
        - homeassistant

    - role: homebridge
      tags:
        - homebridge

    - role: huginn
      tags:
        - huginn

    - role: huntly
      tags:
        - huntly

    - role: immich
      tags:
        - immich

    - role: jackett
      tags:
        - jackett

    - role: jellyfin
      tags:
        - jellyfin

    - role: joomla
      tags:
        - joomla

    - role: kavita
      tags:
        - kavita

    - role: keycloak
      tags:
        - keycloak

    - role: komga
      tags:
        - komga

    - role: krusader
      tags:
        - krusader

    - role: lazylibrarian
      tags:
        - lazylibrarian

    - role: libreddit
      tags:
        - libreddit

    - role: librephotos
      tags:
        - librephotos

    - role: librespeed
      tags:
        - librespeed

    - role: lidarr
      tags:
        - lidarr

    - role: linkding
      tags:
        - linkding

    - role: listmonk
      tags:
        - listmonk

    - role: littlelink
      tags:
        - littlelink

    - role: mattermost
      tags:
        - mattermost

    - role: mealie
      tags:
        - mealie

    - role: memos
      tags:
        - memos

    - role: mergerfs
      tags:
        - mergerfs

    - role: minecraft-server
      tags:
        - minecraft-server

    - role: minetest-server
      tags:
        - minetest-server

    - role: minidlna
      tags:
        - minidlna

    - role: miniflux
      tags:
        - miniflux

    - role: miniserve
      tags:
        - miniserve

    - role: mosquitto
      tags:
        - mosquitto

    - role: moviematch
      tags:
        - moviematch

    - role: mumble
      tags:
        - mumble

    - role: mylar
      tags:
        - mylar

    - role: mymediaforalexa
      tags:
        - mymediaforalexa

    - role: mysql
      tags:
        - mysql

    - role: n8n
      tags:
        - n8n

    - role: navidrome
      tags:
        - navidrome

    - role: netbootxyz
      tags:
        - netbootxyz

    - role: netbox
      tags:
        - netbox

    - role: netdata
      tags:
        - netdata

    - role: nextcloud
      tags:
        - nextcloud

    - role: nodered
      tags:
        - nodered

    - role: nomad
      tags:
        - nomad

    - role: nzbget
      tags:
        - nzbget

    - role: nzbhydra2
      tags:
        - nzbhydra2

    - role: octoprint
      tags:
        - octoprint

    - role: olivetin
      tags:
        - olivetin

    - role: ombi
      tags:
        - ombi

    - role: openhab
      tags:
        - openhab

    - role: openldap
      tags:
        - openldap

    - role: organizr
      tags:
        - organizr

    - role: overseerr
      tags:
        - overseerr

    - role: paperless_ng
      tags:
        - paperless_ng

    - role: photofield
      tags:
        - photofield

    - role: photoprism
      tags:
        - photoprism

    - role: photostructure
      tags:
        - photostructure

    - role: phpmyadmin
      tags:
        - phpmyadmin

    - role: piwigo
      tags:
        - piwigo

    - role: plex
      tags:
        - plex

    - role: portainer
      tags:
        - portainer

    - role: prowlarr
      tags:
        - prowlarr

    - role: pyload
      tags:
        - pyload

    - role: pytivo
      tags:
        - pytivo

    - role: radarr
      tags:
        - radarr

    - role: rclone
      tags:
        - rclone

    - role: releasebell
      tags:
        - releasebell

    - role: restic
      tags:
        - restic

    - role: route53_ddns
      tags:
        - route53_ddns

    - role: rssbridge
      tags:
        - rssbridge

    - role: sabnzbd
      tags:
        - sabnzbd

    - role: scrutiny
      tags:
        - scrutiny

    - role: seafile
      tags:
        - seafile

    - role: searxng
      tags:
        - searxng

    - role: shaarli
      tags:
        - shaarli

    - role: sickchill
      tags:
        - sickchill

    - role: snipeit
      tags:
        - snipeit

    - role: sonarr
      tags:
        - sonarr

    - role: speedtest-tracker
      tags:
        - speedtest-tracker

    - role: stats
      tags:
        - stats

    - role: syncthing
      tags:
        - syncthing

    - role: tandoor_recipes
      tags:
        - tandoor_recipes

    - role: tautulli
      tags:
        - tautulli

    - role: thelounge
      tags:
        - thelounge

    - role: tiddlywiki
      tags:
        - tiddlywiki

    - role: timemachine
      tags:
        - timemachine

    - role: traefik
      tags:
        - traefik

    - role: transmission
      tags:
        - transmission

    - role: transmission-with-openvpn
      tags:
        - transmission_with_openvpn

    - role: trilium
      tags:
        - trilium

    - role: ttrss
      tags:
        - ttrss

    - role: ubooquity
      tags:
        - ubooquity

    - role: utorrent
      tags:
        - utorrent

    - role: vaultwarden
      tags:
        - vaultwarden

    - role: virtual_desktop
      tags:
        - virtual_desktop

    - role: wallabag
      tags:
        - wallabag

    - role: watchtower
      tags:
        - watchtower

    - role: webtrees
      tags:
        - webtrees

    - role: wger
      tags:
        - wger

    - role: whatsupdocker
      tags:
        - whatsupdocker

    - role: whoogle
      tags:
        - whoogle

    - role: wireshark
      tags:
        - wireshark

    - role: wishthis
      tags:
        - wishthis

    - role: woodpecker-ci
      tags:
        - woodpecker_ci

    - role: youtubedlmaterial
      tags:
        - youtubedlmaterial

    - role: znc
      tags:
        - znc
