---
- name: Ansible-NAS
  hosts: all

  pre_tasks:
    - name: Verify Ansible meets ansible-nas version requirements.
      assert:
        that: "ansible_version.full is version_compare('2.10', '>=')"
        msg: "update Ansible to at least 2.10 to install ansible-nas"

  roles:
    ###
    ### Requirements
    ###
    - role: ansible-nas-users
      tags: [ansible-nas-users, ansible-nas]
    - role: vladgh.samba.server
      tags: [samba, skip_ansible_lint]
    - role: geerlingguy.nfs
      tags: [nfs, skip_ansible_lint]
    - role: geerlingguy.docker
      vars:
        docker_apt_filename: download_docker_com_linux_ubuntu
      tags:
        - docker
        - skip_ansible_lint

    ###
    ### Ansible-NAS Roles
    ###
    - role: ansible-nas-general
      tags: [ansible-nas-general, ansible-nas]
    - role: ansible-nas-docker
      tags:
        - ansible-nas-docker
        - ansible-nas

    ###
    ### Stacks
    ###
    - role: logging
      tags:
        - logging

    ###
    ### Applications - Core (alphabetically sorted)
    ###
    - role: adguard
      tags: [adguard, core]
    - role: arcane
      tags: [arcane, core]
    - role: basen
      tags: [basen, core]
    - role: beszel
      tags: [beszel, core]
    - role: booklore
      tags: [booklore, core]
    - role: code-server
      tags: [code-server, core]
    - role: dawarich
      tags: [dawarich, core]
    - role: duplicacy
      tags: [duplicacy, core]
    - role: excalidraw
      tags: [excalidraw, core]
    - role: ftp_server
      tags: [ftp_server, core]
    - role: handbrake
      tags: [handbrake, core]
    - role: homeassistant
      tags: [homeassistant, core]
    - role: homepage
      tags: [homepage, core]
    - role: immich
      tags: [immich, core]
    - role: jellyfin
      tags: [jellyfin, core]
    - role: librespeed
      tags: [librespeed, core]
    - role: libretranslate
      tags: [libretranslate, core]
    - role: netalertx
      tags: [netalertx, core]
    - role: ollama
      tags: [ollama, core]
    - role: paperless_ng
      tags: [paperless_ng, core]
    - role: plex
      tags: [plex, core]
    - role: reitti
      tags: [reitti, core]
    - role: romm
      tags: [romm, core]
    - role: scrutiny
      tags: [scrutiny, core]
    - role: seafile
      tags: [seafile, core]
    - role: searxng
      tags: [searxng, core]
    - role: stats
      tags: [stats, core]
    - role: stirlingpdf
      tags: [stirlingpdf, core]
    - role: tautulli
      tags: [tautulli, core]
    - role: traefik
      tags: [traefik, core]
    - role: transmission-with-openvpn
      tags: [transmission_with_openvpn, core]
    - role: youtubedlmaterial
      tags: [youtubedlmaterial, core]

    ###
    ### Applications - Other (alphabetically sorted)
    ###
    - role: activepieces
      tags: [activepieces]
    - role: actual
      tags: [actual]
    - role: admidio
      tags: [admidio]
    - role: adventure_log
      tags: [adventure_log]
    - role: affine
      tags: [affine]
    - role: airsonic
      tags: [airsonic]
    - role: apcupsd
      tags: [apcupsd]
    - role: appsmith
      tags: [appsmith]
    - role: aria2
      tags: [aria2]
    - role: atmoz
      tags: [atmoz]
    - role: authelia
      tags: [authelia]
    - role: authentik
      tags: [authentik]
    - role: bambustudio
      tags: [bambustudio]
    - role: barcodebuddy
      tags: [barcodebuddy]
    - role: baserow
      tags: [baserow]
    - role: bazarr
      tags: [bazarr]
    - role: beets
      tags: [beets]
    - role: blaze
      tags: [blaze]
    - role: blocky
      tags: [blocky]
    - role: budibase
      tags: [budibase]
    - role: calibre
      tags: [calibre]
    - role: calibreweb
      tags: [calibreweb]
    - role: casdoor
      tags: [casdoor]
    - role: changedetection
      tags: [changedetection]
    - role: chatpad
      tags: [chatpad]
    - role: chatwoot
      tags: [chatwoot]
    - role: claper
      tags: [claper]
    - role: cloudcmd
      tags: [cloudcmd]
    - role: cloudflare_ddns
      tags: [cloudflare_ddns]
    - role: commafeed
      tags: [commafeed]
    - role: couchdb
      tags: [couchdb]
    - role: couchpotato
      tags: [couchpotato]
    - role: cwa
      tags: [cwa]
    - role: dashy
      tags: [dashy]
    - role: dbgate
      tags: [dbgate]
    - role: ddns_updater
      tags: [ddns_updater]
    - role: deluge
      tags: [deluge]
    - role: directus
      tags: [directus]
    - role: dockge
      tags: [dockge]
    - role: dokuwiki
      tags: [dokuwiki]
    - role: domain_watchdog
      tags: [domain_watchdog]
    - role: dozzle
      tags: [dozzle]
    - role: drone-ci
      tags: [drone_ci]
    - role: dufs
      tags: [dufs]
    - role: duplicati
      tags: [duplicati]
    - role: ebusd
      tags: [ebusd]
    - role: emby
      tags: [emby]
    - role: esphome
      tags: [esphome]
    - role: espocrm
      tags: [espocrm]
    - role: evershop
      tags: [evershop]
    - role: firefly
      tags: [firefly]
    - role: flame
      tags: [flame]
    - role: flaresolverr
      tags: [flaresolverr]
    - role: flarum
      tags: [flarum]
    - role: flatnotes
      tags: [flatnotes]
    - role: formbricks
      tags: [formbricks]
    - role: formio
      tags: [formio]
    - role: foundryvtt
      tags: [foundryvtt]
    - role: freshrss
      tags: [freshrss]
    - role: frigate
      tags: [frigate]
    - role: fusion
      tags: [fusion]
    - role: gaps
      tags: [gaps]
    - role: get_iplayer
      tags: [get_iplayer]
    - role: ghost
      tags: [ghost]
    - role: ghostfolio
      tags: [ghostfolio]
    - role: gitea
      tags: [gitea]
    - role: gitlab
      tags: [gitlab]
    - role: glance
      tags: [glance]
    - role: glances
      tags: [glances]
    - role: glpi
      tags: [glpi]
    - role: gotify
      tags: [gotify]
    - role: graylog
      tags: [graylog]
    - role: grist
      tags: [grist]
    - role: grocy
      tags: [grocy]
    - role: guacamole
      tags: [guacamole]
    - role: habitica
      tags: [habitica]
    - role: hafusion
      tags: [hafusion]
    - role: healthchecks.io
      tags: [healthchecks.io]
    - role: heimdall
      tags: [heimdall]
    - role: hello_world
      tags: [hello_world]
    - role: heyform
      tags: [heyform]
    - role: hievents
      tags: [hievents]
    - role: hoarder
      tags: [hoarder]
    - role: homarr
      tags: [homarr]
    - role: homebridge
      tags: [homebridge]
    - role: hoppscotch
      tags: [hoppscotch]
    - role: huginn
      tags: [huginn]
    - role: huly
      tags: [huly]
    - role: huntly
      tags: [huntly]
    - role: icbinv
      tags: [icbinv]
    - role: input
      tags: [input]
    - role: invidious
      tags: [invidious]
    - role: ispyagentdvr
      tags: [ispyagentdvr]
    - role: jackett
      tags: [jackett]
    - role: joomla
      tags: [joomla]
    - role: kavita
      tags: [kavita]
    - role: keycloak
      tags: [keycloak]
    - role: komga
      tags: [komga]
    - role: krusader
      tags: [krusader]
    - role: lazylibrarian
      tags: [lazylibrarian]
    - role: leantime
      tags: [leantime]
    - role: libreddit
      tags: [libreddit]
    - role: librephotos
      tags: [librephotos]
    - role: librum
      tags: [librum]
    - role: lidarr
      tags: [lidarr]
    - role: lidatube
      tags: [lidatube]
    - role: linkding
      tags: [linkding]
    - role: linkstack
      tags: [linkstack]
    - role: linkwarden
      tags: [linkwarden]
    - role: listmonk
      tags: [listmonk]
    - role: littlelink
      tags: [littlelink]
    - role: livehelperchat
      tags: [livehelperchat]
    - role: lldap
      tags: [lldap]
    - role: loki
      tags: [loki]
    - role: lowcoder
      tags: [lowcoder]
    - role: luanti
      tags: [luanti-server]
    - role: lubelogger
      tags: [lubelogger]
    - role: mainsail
      tags: [mainsail]
    - role: mantium
      tags: [mantium]
    - role: mattermost
      tags: [mattermost]
    - role: maybe
      tags: [maybe]
    - role: mealie
      tags: [mealie]
    - role: memos
      tags: [memos]
    - role: mergerfs
      tags: [mergerfs]
    - role: metabase
      tags: [metabase]
    - role: metube
      tags: [metube]
    - role: minecraft-bedrock-server
      tags: [minecraft-bedrock-server]
    - role: minecraft-server
      tags: [minecraft-server]
    - role: minidlna
      tags: [minidlna]
    - role: miniflux
      tags: [miniflux]
    - role: minio
      tags: [minio]
    - role: miniserve
      tags: [miniserve]
    - role: mmp
      tags: [mmp]
    - role: moviematch
      tags: [moviematch]
    - role: mumble
      tags: [mumble]
    - role: mylar
      tags: [mylar]
    - role: mymediaforalexa
      tags: [mymediaforalexa]
    - role: mysql
      tags: [mysql]
    - role: n8n
      tags: [n8n]
    - role: navidrome
      tags: [navidrome]
    - role: neko
      tags: [neko]
    - role: netbootxyz
      tags: [netbootxyz]
    - role: netbox
      tags: [netbox]
    - role: netdata
      tags: [netdata]
    - role: nextcloud
      tags: [nextcloud]
    - role: nocodb
      tags: [nocodb]
    - role: nodered
      tags: [nodered]
    - role: nomad
      tags: [nomad]
    - role: notifo
      tags: [notifo]
    - role: nzbget
      tags: [nzbget]
    - role: nzbhydra2
      tags: [nzbhydra2]
    - role: obsidian
      tags: [obsidian]
    - role: octoprint
      tags: [octoprint]
    - role: olivetin
      tags: [olivetin]
    - role: ombi
      tags: [ombi]
    - role: open-resume
      tags: [openresume]
    - role: openbooks
      tags: [openbooks]
    - role: openhab
      tags: [openhab]
    - role: openldap
      tags: [openldap]
    - role: openwebui
      tags: [openwebui]
    - role: organizr
      tags: [organizr]
    - role: outline
      tags: [outline]
    - role: overleaf
      tags: [overleaf]
    - role: overseerr
      tags: [overseerr]
    - role: photofield
      tags: [photofield]
    - role: photoprism
      tags: [photoprism]
    - role: photostructure
      tags: [photostructure]
    - role: phpmyadmin
      tags: [phpmyadmin]
    - role: pinchflat
      tags: [pinchflat]
    - role: piwigo
      tags: [piwigo]
    - role: pocket_id
      tags: [pocket_id]
    - role: pocketid
      tags: [pocketid]
    - role: portainer
      tags: [portainer]
    - role: pretix
      tags: [pretix]
    - role: promtail
      tags: [promtail]
    - role: prowlarr
      tags: [prowlarr]
    - role: pyload
      tags: [pyload]
    - role: pytivo
      tags: [pytivo]
    - role: radarr
      tags: [radarr]
    - role: rallly
      tags: [rallly]
    - role: rclone
      tags: [rclone]
    - role: readeck
      tags: [readeck]
    - role: releasebell
      tags: [releasebell]
    - role: restic
      tags: [restic]
    - role: richy
      tags: [richy]
    - role: route53_ddns
      tags: [route53_ddns]
    - role: rssbridge
      tags: [rssbridge]
    - role: rsshub
      tags: [rsshub]
    - role: ryot
      tags: [ryot]
    - role: sabnzbd
      tags: [sabnzbd]
    - role: scribblers
      tags: [scribblers]
    - role: servas
      tags: [servas]
    - role: shaarli
      tags: [shaarli]
    - role: shiori
      tags: [shiori]
    - role: sickchill
      tags: [sickchill]
    - role: silverbullet
      tags: [silverbullet]
    - role: simplelogin
      tags: [simplelogin]
    - role: siyuan
      tags: [siyuan]
    - role: snipeit
      tags: [snipeit]
    - role: sonarr
      tags: [sonarr]
    - role: sparkyfitness
      tags: [sparkyfitness]
    - role: speedtest-tracker
      tags: [speedtest-tracker]
    - role: squirrel
      tags: [squirrel]
    - role: stalwart
      tags: [stalwart]
    - role: standardnotes
      tags: [standardnotes]
    - role: suitecrm
      tags: [suitecrm]
    - role: superproductivity
      tags: [superproductivity]
    - role: syncthing
      tags: [syncthing]
    - role: thelounge
      tags: [thelounge]
    - role: threadfin
      tags: [threadfin]
    - role: tiddlywiki
      tags: [tiddlywiki]
    - role: timemachine
      tags: [timemachine]
    - role: tinyauth
      tags: [tinyauth]
    - role: tooljet
      tags: [tooljet]
    - role: trafficstats
      tags: [trafficstats]
    - role: transmission
      tags: [transmission]
    - role: trilium
      tags: [trilium]
    - role: ttrss
      tags: [ttrss]
    - role: twenty
      tags: [twenty]
    - role: ubooquity
      tags: [ubooquity]
    - role: unifi
      tags: [unifi]
    - role: uppy
      tags: [uppy]
    - role: utorrent
      tags: [utorrent]
    - role: valheim
      tags: [valheim]
    - role: vaultwarden
      tags: [vaultwarden]
    - role: virtual_desktop
      tags: [virtual_desktop]
    - role: wallabag
      tags: [wallabag]
    - role: wallos
      tags: [wallos]
    - role: wanderer
      tags: [wanderer]
    - role: watchtower
      tags: [watchtower]
    - role: webtrees
      tags: [webtrees]
    - role: wger
      tags: [wger]
    - role: whatsupdocker
      tags: [whatsupdocker]
    - role: whoogle
      tags: [whoogle]
    - role: wireshark
      tags: [wireshark]
    - role: wishthis
      tags: [wishthis]
    - role: woodpecker-ci
      tags: [woodpecker_ci]
    - role: znc
      tags: [znc]
