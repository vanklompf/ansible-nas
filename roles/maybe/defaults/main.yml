---
maybe_enabled: false
maybe_available_externally: false

# directories
maybe_data_directory: "{{ docker_home }}/maybe"

# network
maybe_port: "3025"
maybe_hostname: "maybe"
maybe_network_name: "maybe"

# specs
maybe_memory: 1g
maybe_postgres_memory: 1g

# docker
maybe_container_name: maybe
maybe_postgres_container_name: maybe-db
maybe_image_name: "ghcr.io/maybe-finance/maybe"
maybe_image_version: latest
maybe_postgres_image_name: "docker.io/library/postgres"
maybe_postgres_image_version: "16"
maybe_user_id: "1000"
maybe_group_id: "1000"

# maybe
maybe_db_name: maybe
maybe_db_username: maybe
maybe_db_password: mysecretpassword
maybe_db_type: postgres
maybe_db_port: "5432"
maybe_db_host: "{{ maybe_postgres_container_name }}"
maybe_env_port: "3000"
maybe_synth_api_key: ""
maybe_smtp_address: ""
maybe_smtp_port: "465"
maybe_smtp_username: ""
maybe_smtp_password: ""
maybe_smtp_tls_enabled: "false"
maybe_email_sender: ""
maybe_app_domain: "https://{{ maybe_hostname }}.{{ ansible_nas_domain }}"
maybe_sentry_dsn: ""
maybe_require_invite_code: "false"
maybe_self_hosting_enabled: "true"
maybe_hosting_platform: ""
maybe_secret_key_base: "8a976b473d7613f983909d50af974d3925da614c820b582e2e54418d6934c876eb2bf112eb8079392f0e5139d53b412eb07583f0627847a7c7efc747980be407"
maybe_disable_ssl: "false"
maybe_upgrades_enabled: "false"
maybe_upgrades_mode: "manual"
maybe_upgrades_target: "release"
maybe_github_repo_owner: "maybe-finance"
maybe_github_repo_name: "maybe"
maybe_github_repo_branch: "main"
maybe_active_storage_service: "amazon"
maybe_s3_access_key_id: ""
maybe_s3_secret_access_key: ""
maybe_s3_region: "us-east-1"
maybe_s3_bucket: ""
maybe_rails_force_ssl: "false"
maybe_rails_assume_ssl: "false"
maybe_good_job_execution_mode: "async"

maybe_env:
  RAILS_FORCE_SSL: "{{ maybe_rails_force_ssl }}"
  RAILS_ASSUME_SSL: "{{ maybe_rails_assume_ssl }}"
  GOOD_JOB_EXECUTION_MODE: "{{ maybe_good_job_execution_mode }}"
  # Custom port config
  # For users who have other applications listening at 3000, this allows them to set a value puma will listen to.
  PORT: "{{ maybe_env_port }}"

  # Exchange Rate API
  # This is used to convert between different currencies in the app. We use Synth, which is a Maybe product. You can sign up for a free account at synthfinance.com.
  SYNTH_API_KEY: "{{ maybe_synth_api_key }}"

  # SMTP Configuration
  # This is only needed if you intend on sending emails from your Maybe instance (such as for password resets or email financial reports).
  # Resend.com is a good option that offers a free tier for sending emails.
  SMTP_ADDRESS: "{{ maybe_smtp_address }}"
  SMTP_PORT: "{{ maybe_smtp_port }}"
  SMTP_USERNAME: "{{ maybe_smtp_username }}"
  SMTP_PASSWORD: "{{ maybe_smtp_password }}"
  SMTP_TLS_ENABLED: "{{ maybe_smtp_tls_enabled }}"

  # Email Configuration
  EMAIL_SENDER: "{{ maybe_email_sender }}"

  # Database Configuration
  DB_HOST: "{{ maybe_db_host }}"
  DB_PORT: "{{ maybe_db_port }}"
  POSTGRES_PASSWORD: "{{ maybe_db_password }}"
  POSTGRES_USER: "{{ maybe_db_username }}"

  # App Domain
  # This is the domain that your Maybe instance will be hosted at. It is used to generate links in emails and other places.
  APP_DOMAIN: "{{ maybe_app_domain }}"

  ## Error and Performance Monitoring
  # The app uses Sentry to monitor errors and performance. In reality, you likely don't need this unless you're deploying Maybe to many users.
  SENTRY_DSN: "{{ maybe_sentry_dsn }}"

  # If enabled, an invite code generated by `rake invites:create` is required to sign up as a new user.
  # This is useful for controlling who can sign up for your Maybe instance.
  REQUIRE_INVITE_CODE: "{{ maybe_require_invite_code }}"

  # Enables self hosting features
  SELF_HOSTING_ENABLED: "{{ maybe_self_hosting_enabled }}"

  # The hosting platform used to deploy the app (e.g. "render")
  # `localhost` (or unset) is used for local development and testing
  HOSTING_PLATFORM: "{{ maybe_hosting_platform }}"

  # Secret key used to encrypt credentials (https://api.rubyonrails.org/v7.1.3.2/classes/Rails/Application.html#method-i-secret_key_base)
  # Has to be a random string, generated eg. by running `openssl rand -hex 64`
  SECRET_KEY_BASE: "{{ maybe_secret_key_base }}"

  # Disable enforcing SSL connections
  # DISABLE_SSL: "{{ maybe_disable_ssl }}"

  # ======================================================================================================
  # Upgrades Module - responsible for triggering upgrade alerts, prompts, and auto-upgrade functionality
  # ======================================================================================================
  #
  # UPGRADES_ENABLED: Enables Upgrader class functionality.
  # UPGRADES_MODE: Controls how the app will upgrade. `manual` means the user must manually upgrade the app. `auto` means the app will upgrade automatically (great for self-hosting)
  # UPGRADES_TARGET: Controls what the app will upgrade to. `release` means the app will upgrade to the latest release. `commit` means the app will upgrade to the latest commit.
  #
  UPGRADES_ENABLED: "{{ maybe_upgrades_enabled }}"
  UPGRADES_MODE: "{{ maybe_upgrades_mode }}"
  UPGRADES_TARGET: "{{ maybe_upgrades_target }}"


  # ======================================================================================================
  # Git Repository Module - responsible for fetching latest commit data for upgrades
  # ======================================================================================================
  #
  GITHUB_REPO_OWNER: "{{ maybe_github_repo_owner }}"
  GITHUB_REPO_NAME: "{{ maybe_github_repo_name }}"
  GITHUB_REPO_BRANCH: "{{ maybe_github_repo_branch }}"

  # ======================================================================================================
  # Active Storage Configuration - responsible for storing file uploads
  # ======================================================================================================
  #
  # * Defaults to disk storage but you can also use Amazon S3, Google Cloud Storage, or Microsoft Azure Storage.
  # * Set the appropriate environment variables to use these services.
  # * Ensure libvips is installed on your system for image processing - https://github.com/libvips/libvips
  #
  # Amazon S3
  # ==========
  # ACTIVE_STORAGE_SERVICE: "{{ maybe_active_storage_service }}"=amazon
  # S3_ACCESS_KEY_ID: "{{ maybe_s3_access_key_id }}"
  # S3_SECRET_ACCESS_KEY: "{{ maybe_s3_secret_access_key }}"
  # S3_REGION: "{{ maybe_s3_region }}"= # defaults to `us-east-1` if not set
  # S3_BUCKET: "{{ maybe_s3_bucket }}"
